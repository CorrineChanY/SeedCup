# 2021/1/24前端代码修改建议

- [x] 1. public目录下的materialize.css和materialize.js给删除掉

- [x] 2. 使用了React作为框架后，需要舍弃JQuery这个库。因为二者的功能是相同的，JQuery能做的，React也能做，并且React与项目工程更加搭配。所以请删除JQuery这个库。

- [x] 3. materialize的依赖是JQuery，所以也请删除它。不过css样式可以保存下来。
==css保留了还可以用吗==
- [ ] 4. **Class Components均换成Function Components来提升性能**

- [ ] 5. 
```jsx
  // signin.js
  function logIn() {
          // 拦截器在interceptors.js
          axios.post(base + '/api/user/log_in', {
              username: usr,
              password: pass
          },{
              headers: {
                  'Content-Type': 'application/json'
              }
          })
          .then(function (response) {
              ////////
              // 因为通过了拦截器的处理，这里无需再判断data.code
              ////////
              console.log(response);
              if(response.data.code === "0" && response.data.message === "success"){
                  alert("登陆成功！");
              }else{
                  alert("登陆失败！");
              }
          })
          .catch(function (error) {
              // console.log(error);
              alert(error);
          });
  
          
      }
```


 - [ ] 6. js文件需要代码格式化，缩进问题有点严重
 ==改成缩进2个空格吗？==
 - [ ] 7. 
```jsx
  // signup.js
  ////////////
  // 这些方法很是雷同。是不是可以构造一个JS的高阶函数来减少代码量？
  ////////////
  handleUsrnameInput(e) {
          this.setState({
              user: e.target.value
          })
          // console.log(this.state);
      }
  
      handleSchoolInput(e) {
          this.setState({
              school: e.target.value
          })
      }
  
      handleCollegeInput(e) {
          this.setState({
              college: e.target.value
          })
      }
  
      handleClassInput(e) {
              this.setState({
                  class: e.target.value
              })
      }
  
      handlePhoneInput(e) {
          this.setState({
              phone: e.target.value
          });
          // console.log(this.state.phone);
      }
```

- [x] 8. **所有的相关get、post请求都应该做如下修改**，下面是其中一个例子

  ```jsx
  // signup.js
  //////////
  // 1. get和post的第一个参数url可以省略base，具体的配置网上有案例
  // 2. post的调用还可以继续简化，把{headers}给设置为默认参数
  // 3. 把axios.post('/api/user/sign_up')给封装为一个API来使用，放在misc目录的interface.js中
  //     example: API.SignUp(this.state)
  // 4. 将.then()修改为async/await语法实现
  //     example: const r = await API.SignUp(this.state);
  /////////
  axios.post(
      base + '/api/user/sign_up',
      this.state, {
          headers: "application/json"
      }
  )
      .then(function (response) {
      console.log(response);
  })
      .catch(function (error) {
      console.log(error);
  })
  ```

- [x] 9. 有些函数是可以提取到misc目录下的utils.js里的，想想看会有哪些。举例：signup.js里的checkPhone()方法

- [x] 10. component里的组件不知所云。Table组件不应该这么使用，也需要用Function Components来实现

- [x] 11. **提取相同结构的标签组抽象为组件**，下面是其中一个例子

  ```jsx
  // seed.js
  ////////////
  // 提取相同结构的标签组抽象为组件
  // example:
  // 		// 每一个li实际上可以封装为一个组件，每个组件实例拥有同样的样式
  // 		function Li({title, number, prize, info}) {}
  //			<Li title="一等奖" number="1" prize: "10,000" info={<p></p>}>
  //			<Li title="二等奖" number="2" prize: "5,000" info={<p></p>}>
  //			<Li title="三等奖" number="3" prize: "3,000" info={<p></p>}>
  ///////////
  <li>
      <div className="rank-title">
          <div className="rank-bar">一等奖</div>
          <div className="rank-number">x1</div>
      </div>
      <div className="rank-prize">10,000RMB</div>
      <div className="rank-info">
          <p>
              团体第一名荣誉证书<br />
              参赛队员的荣誉证书<br />
              冠军奖杯
          </p>
      </div>
  </li>
  <li>
      <div className="rank-title">
          <div className="rank-bar">二等奖</div>
          <div className="rank-number">x2</div>
      </div>
      <div className="rank-prize">5,000RMB</div>
      <div className="rank-info">
          <p>
              团体第二名荣誉证书<br />
              参赛队员的荣誉证书
          </p>
      </div>
  </li>
  <li>
      <div className="rank-title">
          <div className="rank-bar">三等奖</div>
          <div className="rank-number">x3</div>
      </div>
      <div className="rank-prize">3,000RMB</div>
      <div className="rank-info">
          <p>
              团体第三名荣誉证书<br />
              参赛队员的荣誉证书
          </p>
      </div>
  </li>
  ```

- [x] 12.
```jsx
  // seed.js
  ///////////
  // 这里的导航切换下面的显示有错误，没有使用React的特性
  // 参考https://www.cnblogs.com/xianyulaodi/p/5634843.html 的三种实现方式
  // 用第三种方式封装一个种子杯的Tab组件
  ////////////
  
  class Seed extends React.Component{
      render() {
          return(
              <div className="main-banner" style={{overflowX: "hidden"}}>
                  <Nav />
                  <Banner />
                  <img src={seedlogo} alt="seedlogo" style={{position: "absolute", left: "20px", top: "15px"}}/>
                  <div className="row">
                      <div className="container contenter">
                          <ul className="tabs" style={{width:"105%"}}>
                              <li className="tab col s2 taber"><a href="#head1">大赛首页</a></li>
                              <li className="tab col s2 taber"><a href="#publish">比赛信息</a></li>
                              <li className="tab col s2 taber"><a href="#lister">排行榜</a></li>
                              <li className="tab col s2 taber"><a href="#percenter">我的队伍</a></li>
                              <li className="tab col s2 taber"><a href="#playback">赛局回放</a></li>
                          </ul>
                      </div>
                  </div>
                  <Head1 />
                  <Publish />
                  <Lister />
                  <Percenter />
                  <Playback />
                  
                  {this.props.children}
              </div>
          )
      }
  };
```

- [ ] 13. 没有必要的父标签需要简化删除，以此提升性能

  ```jsx
  // 这里的div标签不需要
  function App() {
      return(
        <div>
          <Rt />
        </div>
      )
  }
  
  // 这里的div标签不需要
  class Nav extends React.Component{
      render() {
          return(
              <div>
                  <nav style={{backgroundColor:"black"}} className="nav">
                      <ul style={{position: "relative", left: "85%"}}>
                          <li style={{position: "relative"}}>
                              <Link to="/signin" style={{color:"white"}}>
                                  sign in
                              </Link>
                          </li>
                          <li style={{position: "relative"}}>
                              <Link to="/signup" style={{color:"white"}}>
                                  sign up
                              </Link>
                          </li>
                      </ul>
                  </nav>
              </div>
          )
      }
  }
  ```

  

